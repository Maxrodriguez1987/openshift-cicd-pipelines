apiVersion: v1
kind: Template
metadata:
  name: test-pipeline-template
  annotations:
    openshift.io/display-name: Application Pipeline (TEST)
    iconClass: fa fa-code
objects:
- apiVersion: v1
  kind: BuildConfig
  metadata:
    labels:
      pipeline: ${APP_NAME}
    name: ${APP_NAME}-pipeline
  spec:
    source:
        type: Git
        git:
          uri: http://gogs-gogs.192.168.64.36.nip.io/leandroberetta/openshift-pipelines.git
          ref: master
        contextDir: test
    strategy:
      jenkinsPipelineStrategy:
        env:
        - name: APP
          value: ${APP_NAME}
        jenkinsfilePath: test/Jenkinsfile
      type: JenkinsPipeline
parameters:
- description: The application name
  displayName: Application name
  name: APP_NAME
  required: true